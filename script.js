let courses = [
  {
    image: "./assets/images/html.png",
    subtitle: "Web Development Languages",
    title: "HTML",
    author: "Sarah Smith",
    rating: 80,
  },
  {
    image: "./assets/images/css.webp",
    subtitle: "Web Development Languages",
    title: "CSS",
    author: "David Lee",
    rating: 70,
  },
  {
    image: "./assets/images/javascript.jpg",
    subtitle: "Web Development Languages",
    title: "JavaScript",
    author: "Emily Chen",
    rating: 80,
  },
  {
    image: "./assets/images/jquery.png",
    subtitle: "Frontend Frameworks and Libraries",
    title: "jQuery",
    author: "John Johnson",
    rating: 80,
  },
  {
    image: "./assets/images/angular.png",
    subtitle: "Frontend Frameworks and Libraries",
    title: "Angular",
    author: "Jessica Davis",
    rating: 75,
  },
  {
    image: "./assets/images/react.webp",
    subtitle: "Frontend Frameworks and Libraries",
    title: "React",
    author: "Daniel Brown",
    rating: 80,
  },
  {
    image: "./assets/images/vuejs.jpeg",
    subtitle: "Frontend Frameworks and Libraries",
    title: "Vue.js",
    author: "Ava Jones",
    rating: 75,
  },
  {
    image: "./assets/images/nodejs.webp",
    subtitle: "Backend Frameworks and Libraries",
    title: "Node.js",
    author: "Micheal Kim",
    rating: 80,
  },
  {
    image: "./assets/images/expressjs.webp",
    subtitle: "Backend Frameworks and Libraries",
    title: "Express.js",
    author: "Sophia Rodriguez",
    rating: 80,
  },
  {
    image: "./assets/images/ruby.jpeg",
    subtitle: "Backend Frameworks and Libraries",
    title: "Ruby and Rails",
    author: "William Lee",
    rating: 60,
  },
  {
    image: "./assets/images/html.png",
    subtitle: "Web Development Languages",
    title: "HTML",
    author: "Sarah Smith",
    rating: 80,
  },
  {
    image: "./assets/images/css.webp",
    subtitle: "Web Development Languages",
    title: "CSS",
    author: "David Lee",
    rating: 70,
  },
  {
    image: "./assets/images/javascript.jpg",
    subtitle: "Web Development Languages",
    title: "JavaScript",
    author: "Emily Chen",
    rating: 80,
  },
  {
    image: "./assets/images/jquery.png",
    subtitle: "Frontend Frameworks and Libraries",
    title: "jQuery",
    author: "John Johnson",
    rating: 80,
  },
  {
    image: "./assets/images/angular.png",
    subtitle: "Frontend Frameworks and Libraries",
    title: "Angular",
    author: "Jessica Davis",
    rating: 75,
  },
  {
    image: "./assets/images/react.webp",
    subtitle: "Frontend Frameworks and Libraries",
    title: "React",
    author: "Daniel Brown",
    rating: 80,
  },
  {
    image: "./assets/images/vuejs.jpeg",
    subtitle: "Frontend Frameworks and Libraries",
    title: "Vue.js",
    author: "Ava Jones",
    rating: 75,
  },
  {
    image: "./assets/images/nodejs.webp",
    subtitle: "Backend Frameworks and Libraries",
    title: "Node.js",
    author: "Micheal Kim",
    rating: 80,
  },
  {
    image: "./assets/images/expressjs.webp",
    subtitle: "Backend Frameworks and Libraries",
    title: "Express.js",
    author: "Sophia Rodriguez",
    rating: 80,
  },
  {
    image: "./assets/images/ruby.jpeg",
    subtitle: "Backend Frameworks and Libraries",
    title: "Ruby and Rails",
    author: "William Lee",
    rating: 60,
  },
  {
    image: "./assets/images/html.png",
    subtitle: "Web Development Languages",
    title: "HTML",
    author: "Sarah Smith",
    rating: 80,
  },
  {
    image: "./assets/images/css.webp",
    subtitle: "Web Development Languages",
    title: "CSS",
    author: "David Lee",
    rating: 70,
  },
  {
    image: "./assets/images/javascript.jpg",
    subtitle: "Web Development Languages",
    title: "JavaScript",
    author: "Emily Chen",
    rating: 80,
  },
  {
    image: "./assets/images/jquery.png",
    subtitle: "Frontend Frameworks and Libraries",
    title: "jQuery",
    author: "John Johnson",
    rating: 80,
  },
  {
    image: "./assets/images/angular.png",
    subtitle: "Frontend Frameworks and Libraries",
    title: "Angular",
    author: "Jessica Davis",
    rating: 75,
  },
  {
    image: "./assets/images/react.webp",
    subtitle: "Frontend Frameworks and Libraries",
    title: "React",
    author: "Daniel Brown",
    rating: 80,
  },
  {
    image: "./assets/images/vuejs.jpeg",
    subtitle: "Frontend Frameworks and Libraries",
    title: "Vue.js",
    author: "Ava Jones",
    rating: 75,
  },
  {
    image: "./assets/images/nodejs.webp",
    subtitle: "Backend Frameworks and Libraries",
    title: "Node.js",
    author: "Micheal Kim",
    rating: 80,
  },
  {
    image: "./assets/images/expressjs.webp",
    subtitle: "Backend Frameworks and Libraries",
    title: "Express.js",
    author: "Sophia Rodriguez",
    rating: 80,
  },
  {
    image: "./assets/images/ruby.jpeg",
    subtitle: "Backend Frameworks and Libraries",
    title: "Ruby and Rails",
    author: "William Lee",
    rating: 60,
  },
  {
    image: "./assets/images/html.png",
    subtitle: "Web Development Languages",
    title: "HTML",
    author: "Sarah Smith",
    rating: 80,
  },
  {
    image: "./assets/images/css.webp",
    subtitle: "Web Development Languages",
    title: "CSS",
    author: "David Lee",
    rating: 70,
  },
  {
    image: "./assets/images/javascript.jpg",
    subtitle: "Web Development Languages",
    title: "JavaScript",
    author: "Emily Chen",
    rating: 80,
  },
  {
    image: "./assets/images/jquery.png",
    subtitle: "Frontend Frameworks and Libraries",
    title: "jQuery",
    author: "John Johnson",
    rating: 80,
  },
  {
    image: "./assets/images/angular.png",
    subtitle: "Frontend Frameworks and Libraries",
    title: "Angular",
    author: "Jessica Davis",
    rating: 75,
  },
  {
    image: "./assets/images/react.webp",
    subtitle: "Frontend Frameworks and Libraries",
    title: "React",
    author: "Daniel Brown",
    rating: 80,
  },
  {
    image: "./assets/images/vuejs.jpeg",
    subtitle: "Frontend Frameworks and Libraries",
    title: "Vue.js",
    author: "Ava Jones",
    rating: 75,
  },
  {
    image: "./assets/images/nodejs.webp",
    subtitle: "Backend Frameworks and Libraries",
    title: "Node.js",
    author: "Micheal Kim",
    rating: 80,
  },
  {
    image: "./assets/images/expressjs.webp",
    subtitle: "Backend Frameworks and Libraries",
    title: "Express.js",
    author: "Sophia Rodriguez",
    rating: 80,
  },
  {
    image: "./assets/images/ruby.jpeg",
    subtitle: "Backend Frameworks and Libraries",
    title: "Ruby and Rails",
    author: "William Lee",
    rating: 60,
  },
];

const list = document.getElementById("list");
const btnDarkMode = document.getElementById("btn_night_mode");
const searchQuery = document.getElementById("search_query");
const resultsTitle = document.getElementById("results_title");

btnDarkMode.addEventListener("click", darkModeToggle);
searchQuery.addEventListener("keydown", search);

let darkMode = 0;

const cardFactory = (course) => {
  // create card element
  const card = document.createElement("a");
  card.className = "card";
  card.href = "./details/index.html";

  // create image element
  const img = document.createElement("img");
  img.id = "course_image";
  img.src = course.image;
  img.alt = "Course image";
  card.appendChild(img);

  // create card container element
  const container = document.createElement("div");
  container.className = "card_container";
  card.appendChild(container);

  // create subtitle element
  const subtitle = document.createElement("p");
  subtitle.id = "subtitle";
  subtitle.className = "subtitle";
  subtitle.textContent = course.subtitle;
  container.appendChild(subtitle);

  // create title element
  const title = document.createElement("h4");
  title.id = "title";
  title.innerHTML = "<b>" + course.title + "</b>";
  container.appendChild(title);

  // create rating element
  const rating = document.createElement("div");
  rating.className = "rating";
  container.appendChild(rating);

  // create stars element
  const stars = document.createElement("div");
  const value = course.rating;
  const wholeStars = Math.floor((value / 100) * 5);
  stars.className = `stars stars-${wholeStars}`;
  rating.appendChild(stars);

  // create author container element
  const authorContainer = document.createElement("div");
  authorContainer.id = "author_container";
  container.appendChild(authorContainer);

  // create author label element
  const authorLabel = document.createElement("label");
  authorLabel.htmlFor = "author";
  authorLabel.textContent = "Author:";
  authorContainer.appendChild(authorLabel);

  // create author element
  const author = document.createElement("p");
  author.id = "author";
  author.name = "author";
  author.textContent = course.author;
  authorContainer.appendChild(author);

  // return the card element
  return card;
};

courses.map((course) => {
  let courseCard = cardFactory(course);
  list.appendChild(courseCard);
});

resultsTitle.innerText = `"${courses.length}" Web Topics Found`;

function darkModeToggle() {
  if (!darkMode) {
    document.documentElement.style.setProperty("--bg_default", "#1a1a1a");
    document.documentElement.style.setProperty("--bg_body", "#282828");
    document.documentElement.style.setProperty("--lines-color", "#000");
    document.documentElement.style.setProperty("--body-text", "#ededed");
    darkMode = 1;
    // window.location.reload();
  } else {
    document.documentElement.style.setProperty("--bg_default", "#fff");
    document.documentElement.style.setProperty("--bg_body", "#f0f9ff");
    document.documentElement.style.setProperty("--lines-color", "#ddd");
    document.documentElement.style.setProperty("--body-text", "#333");
    darkMode = 0;
    // window.location.reload();
  }
}
const searchCondition = (title, subtitle, query) =>
  title.includes(query.toLowerCase()) ||
  (subtitle.includes(query.toLowerCase()) && true);

function search(e) {
  list.innerHTML = "";
  const selectedCourses = courses.filter((course) =>
    searchCondition(
      course.title.toLowerCase(),
      course.subtitle.toLowerCase(),
      e.target.value
    )
  );
  resultsTitle.innerText = `"${selectedCourses.length}" Web Topics Found`;
  selectedCourses.map((selected) => {
    let courseCard = cardFactory(selected);
    list.appendChild(courseCard);
  });
}
